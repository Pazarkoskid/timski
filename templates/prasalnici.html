{% load static %}
<!DOCTYPE html>
<html>
<head>
    <title>{{ quiz.title }}</title>
    <link rel="stylesheet" href="/static/style.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
</head>
<body>

<nav class="navbar navbar-expand-lg bg-body-tertiary">
    <div class="container-fluid">
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarTogglerDemo01"
                aria-controls="navbarTogglerDemo01" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarTogglerDemo01">
            <a class="navbar-brand" href="#">PROJECT</a>
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                <li class="nav-item">
                    <a class="nav-link" aria-current="page" href="/">Questions</a>
                </li>

                <li class="nav-item">
                    <a class="nav-link" href="#">Answers</a>
                </li>
            </ul>
            <div class="d-flex gap-2">
                {% if request.user.is_authenticated %}
                    <span class="navbar-text me-2">{{ request.user.username }}</span>

                    <form method="post" action="{% url 'logout' %}" class="m-0">
                        {% csrf_token %}
                        <button type="submit" class="btn btn-outline-success">Logout</button>
                    </form>
                {% else %}
                    <a class="btn btn-outline-success" href="{% url 'login' %}">Login</a>
                {% endif %}
            </div>
        </div>
    </div>
</nav>

<div class="container mt-4">
    <div class="row mb-3 align-items-center">
        <div class="col-8">
            <h1 class="mb-0">{{ quiz.title }}</h1>
        </div>
        <div class="col-4 text-end small">
            <p class="mb-0">{{ quiz.age_range }}</p>
        </div>
    </div>

    <div class="p-3 mb-4" style="background-color: #f0f0f0;">
        <p class="mb-0">
            На следниве страници се дадени активности кои вашето бебе можеби ги прави.
            Вашето бебе некои од активностите можеби веќе ги извршува, а други можеби сè уште не започнало да ги прави.
            За секое барање ве молиме пополнете во соодветното квадранче во зависност од тоа дали бебето
            активноста ја изведува редовно, понекогаш или сè уште не.
        </p>
    </div>

    <div class="row mb-5">
        <div class="col-6">
            <p class="fw-bold">Важни насоки што треба да се запомнат:</p>
            <ul>
                <li>Секоја активност пробајте ја со вашето бебе пред да одговорите</li>
                <li>Направете овој прашалник да биде забавен за вас и вашето бебе, како да е игра</li>
                <li>Бидете сигурни дека бебето е најадено и наспано</li>
                <li>Ве молиме вратете го прашалникот најдоцна до <span
                        style="border-bottom: 1px solid black; padding: 0 50px;"></span></li>
            </ul>
        </div>
        <div class="col-6">
            <p class="fw-bold">Забелешки:</p>
            <textarea class="form-control" style="height: 100px"></textarea>

        </div>
    </div>

    <form method="POST">
        {% csrf_token %}

        {% for section in quiz.sections %}
            <h2>{{ section.name }}</h2>

            <table class="question-table">
                <tr>
                    <th class="col-question"></th>
                    <th class="col-header">ДА</th>
                    <th class="col-header">ПОНЕКОГАШ</th>
                    <th class="col-header">СЕ УШТЕ НЕ</th>
                    <th class="col-header">Поени</th>
                </tr>

                {% for q in section.questions %}
                    <tr>
                        <td class="question-text">
                            {{ forloop.counter }}. {{ q.text }}

                            {% if q.commands %}
                                <div class="mt-2 p-3 border rounded bg-light-subtle">
                                    <ul class="list-unstyled ms-4 mb-0 small">
                                        {% for command in q.commands %}
                                            <li class="d-flex align-items-center mb-1">
                                                <input type="checkbox" name="{{ q.id }}_command"
                                                       value="{{ command.command }}" class="me-2 form-check-input">
                                                <label class="mb-0">{{ command.command }}</label>
                                            </li>
                                        {% endfor %}
                                    </ul>
                                </div>
                            {% endif %}

                            {% if q.example_combinations %}
                                <div class="mt-2">
                                    <textarea name="{{ q.id }}_examples" class="form-control" rows="3"
                                              placeholder="{{ q.example_combinations }}"></textarea>
                                </div>
                            {% endif %}
                        </td>
                        {% for opt in q.options %}
                            <td class="radio-cell">
                                <input type="radio" style="height: 20px;width: 20px" name="{{ q.id }}" value="{{ opt }}"
                                       required>
                            </td>
                        {% endfor %}

                        <td class="points-cell">___</td>
                    </tr>
                {% endfor %}
            </table>

            <div class="section-total text-end fw-bold fs-4">
                <br>
                {{ section.name }} ВКУПНО: _____
            </div>
        {% endfor %}

        <h2>Завршни прашања</h2>

        <p>Родителите можат да пишуваат дополнителни коментари во просторот.</p>

        {% for q in quiz.final_questions %}
            <div class="final-question mb-4">
                <p>
                    {{ forloop.counter }}. {{ q.text }}
                </p>

                <textarea name="txt_{{ q.id }}" class="form-control mb-3 final-textarea-custom" rows="3"
                          placeholder="Објаснете овде ако треба..."></textarea>

                <div class="d-flex justify-content-end final-options-custom">

                    {% for opt in q.options %}
                        <div class="text-center me-4">
                            <label class="d-block mb-1 fw-bold" for="{{ q.id }}_{{ opt }}">
                                {{ opt }}
                            </label>
                            <input class="form-check-input" type="radio"
                                   name="{{ q.id }}" id="{{ q.id }}_{{ opt }}" value="{{ opt }}" required>
                        </div>
                    {% endfor %}

                </div>
            </div>
        {% endfor %}

        <button>SEND</button>
    </form>
</div>
</body>
</html>